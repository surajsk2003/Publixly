"use strict";(()=>{var e={};e.id=761,e.ids=[761],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2772:(e,r,o)=>{o.r(r),o.d(r,{config:()=>l,default:()=>a,routeModule:()=>c});var s={};o.r(s),o.d(s,{default:()=>handler});var t=o(1802),n=o(7153),i=o(6249);async function handler(e,r){if(console.log("API Route called with method:",e.method),"POST"!==e.method)return r.status(405).json({error:"Method not allowed"});let{email:o}=e.body;if(console.log("Received email:",o),!o||!o.includes("@"))return console.log("Invalid email provided:",o),r.status(400).json({error:"Invalid email address"});let s=process.env.CONVERTKIT_FORM_ID,t=process.env.CONVERTKIT_API_KEY;if(console.log("Form ID:",s),console.log("API Key exists:",!!t),!s||!t)return console.error("Missing environment variables"),r.status(500).json({error:"Server configuration error"});try{let e=`https://api.convertkit.com/v3/forms/${s}/subscribe`;console.log("Making request to:",e),console.log("Payload:",{email:o,api_key:"***"});let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,api_key:t})}),i=await n.json();if(console.log("ConvertKit response status:",n.status),console.log("ConvertKit response data:",i),!n.ok)return console.error("ConvertKit API error:",i),r.status(400).json({error:i?.message||i?.error||"Subscription failed",details:i});return console.log("Subscription successful for:",o),r.status(200).json({success:!0,message:"Successfully subscribed!",subscriber:i.subscription})}catch(e){return console.error("API Route error:",e),r.status(500).json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"})}}let a=(0,i.l)(s,"default"),l=(0,i.l)(s,"config"),c=new t.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/subscribe",pathname:"/api/subscribe",bundlePath:"",filename:""},userland:s})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),o=r.X(0,[222],()=>__webpack_exec__(2772));module.exports=o})();